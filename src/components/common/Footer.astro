---
import SunMoon from '@ui/SunMoon.astro'
---

<footer
  class="border-t border-gray-400 dark:border-gray-600 py-6 text-sm text-gray-500 dark:text-gray-450"
>
  <div
    class="mx-auto max-w-screen-lg flex flex-col items-center gap-3 sm:flex-row sm:justify-center"
  >
    <p class="m-0 shrink-0">© 2025 All rights reserved</p>

    <span class="hidden sm:inline" aria-hidden="true">·</span>

    <nav aria-label="Footer navigation">
      <ul class="flex flex-wrap items-center justify-center gap-2 sm:gap-3">
        <li>
          <a
            href="/"
            class="transition hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-400"
          >
            Home
          </a>
        </li>
        <li>
          <a
            href="https://github.com/alejyoo/alejyoo.github.io"
            target="_blank"
            rel="noopener noreferrer"
            class="transition hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-400"
          >
            Source
          </a>
        </li>
      </ul>
    </nav>

    <span class="hidden sm:inline" aria-hidden="true">·</span>

    <SunMoon />

    <button
      type="button"
      aria-label="Switch between light and dark theme"
      class="theme-switch hidden sm:inline transition hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-400"
    >
      Switch theme
    </button>
  </div>
</footer>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const $html = document.documentElement;

    const savedTheme = localStorage.getItem("theme");
    const systemTheme = window.matchMedia("(prefers-color-scheme: dark)")
      .matches
      ? "dark"
      : "light";
    const initialTheme = savedTheme || systemTheme;
    $html.setAttribute("data-theme", initialTheme);

    const $buttons = document.querySelectorAll(".theme-switch");

    $buttons.forEach(($btn) => {
      $btn.addEventListener("click", () => {
        const currentTheme =
          $html.getAttribute("data-theme") ||
          localStorage.getItem("theme") ||
          systemTheme;

        const newTheme = currentTheme === "dark" ? "light" : "dark";

        $html.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
      });
    });
  });
</script>
